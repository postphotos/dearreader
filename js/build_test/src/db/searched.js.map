{
  "version": 3,
  "sources": ["../../../src/db/searched.ts"],
  "sourcesContent": ["import { Also, parseJSONText, Prop } from 'civkit';\nimport { FirestoreRecord } from '../shared/lib/firestore.js';\n\n@Also({\n    dictOf: Object\n})\nexport class SearchResult extends FirestoreRecord {\n    static override collectionName = 'searchResults';\n\n    override _id!: string;\n\n    @Prop({\n        required: true\n    })\n    query!: any;\n\n    @Prop({\n        required: true\n    })\n    queryDigest!: string;\n\n    @Prop()\n    response?: any;\n\n    @Prop()\n    createdAt!: Date;\n\n    @Prop()\n    expireAt?: Date;\n\n    [k: string]: any;\n\n    static patchedFields = [\n        'query',\n        'response',\n    ];\n\n    static override from(input: any) {\n        for (const field of this.patchedFields) {\n            if (typeof input[field] === 'string') {\n                input[field] = parseJSONText(input[field]);\n            }\n        }\n\n        return super.from(input) as SearchResult;\n    }\n\n    override degradeForFireStore() {\n        const copy: any = { ...this };\n\n        for (const field of (this.constructor as typeof SearchResult).patchedFields) {\n            if (typeof copy[field] === 'object') {\n                copy[field] = JSON.stringify(copy[field]) as any;\n            }\n        }\n\n        return copy;\n    }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAAS,MAAM,eAAe,YAAY;AAC1C,SAAS,uBAAuB;AAKzB,IAAM,eAAN,cAA2B,gBAAgB;AAAA,EA+B9C,OAAgB,KAAK,OAAY;AAC7B,eAAW,SAAS,KAAK,eAAe;AACpC,UAAI,OAAO,MAAM,KAAK,MAAM,UAAU;AAClC,cAAM,KAAK,IAAI,cAAc,MAAM,KAAK,CAAC;AAAA,MAC7C;AAAA,IACJ;AAEA,WAAO,MAAM,KAAK,KAAK;AAAA,EAC3B;AAAA,EAES,sBAAsB;AAC3B,UAAM,OAAY,EAAE,GAAG,KAAK;AAE5B,eAAW,SAAU,KAAK,YAAoC,eAAe;AACzE,UAAI,OAAO,KAAK,KAAK,MAAM,UAAU;AACjC,aAAK,KAAK,IAAI,KAAK,UAAU,KAAK,KAAK,CAAC;AAAA,MAC5C;AAAA,IACJ;AAEA,WAAO;AAAA,EACX;AACJ;AApDa,aACO,iBAAiB;AADxB,aA0BF,gBAAgB;AAAA,EACnB;AAAA,EACA;AACJ;AArBA;AAAA,EAHC,KAAK;AAAA,IACF,UAAU;AAAA,EACd,CAAC;AAAA,GAPQ,aAQT;AAKA;AAAA,EAHC,KAAK;AAAA,IACF,UAAU;AAAA,EACd,CAAC;AAAA,GAZQ,aAaT;AAGA;AAAA,EADC,KAAK;AAAA,GAfG,aAgBT;AAGA;AAAA,EADC,KAAK;AAAA,GAlBG,aAmBT;AAGA;AAAA,EADC,KAAK;AAAA,GArBG,aAsBT;AAtBS,eAAN;AAAA,EAHN,KAAK;AAAA,IACF,QAAQ;AAAA,EACZ,CAAC;AAAA,GACY;",
  "names": []
}
