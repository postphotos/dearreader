{
  "version": 3,
  "sources": ["../../../src/db/pdf.ts"],
  "sourcesContent": ["import { Also, parseJSONText, Prop } from 'civkit';\nimport { FirestoreRecord } from '../shared/lib/firestore.js';\n\n@Also({\n    dictOf: Object\n})\nexport class PDFContent extends FirestoreRecord {\n    static override collectionName = 'pdfs';\n\n    override _id!: string;\n\n    @Prop({\n        required: true\n    })\n    src!: string;\n\n    @Prop({\n        required: true\n    })\n    urlDigest!: string;\n\n    @Prop()\n    meta?: { [k: string]: any; };\n\n    @Prop()\n    text?: string;\n\n    @Prop()\n    content?: string;\n\n    @Prop()\n    createdAt!: Date;\n\n    @Prop()\n    expireAt?: Date;\n\n    static patchedFields = [\n        'meta'\n    ];\n\n    static override from(input: any) {\n        for (const field of this.patchedFields) {\n            if (typeof input[field] === 'string') {\n                input[field] = parseJSONText(input[field]);\n            }\n        }\n\n        return super.from(input) as PDFContent;\n    }\n\n    override degradeForFireStore() {\n        const copy: any = { ...this };\n\n        for (const field of (this.constructor as typeof PDFContent).patchedFields) {\n            if (typeof copy[field] === 'object') {\n                copy[field] = JSON.stringify(copy[field]) as any;\n            }\n        }\n\n        return copy;\n    }\n\n    [k: string]: any;\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAAS,MAAM,eAAe,YAAY;AAC1C,SAAS,uBAAuB;AAKzB,IAAM,aAAN,cAAyB,gBAAgB;AAAA,EAkC5C,OAAgB,KAAK,OAAY;AAC7B,eAAW,SAAS,KAAK,eAAe;AACpC,UAAI,OAAO,MAAM,KAAK,MAAM,UAAU;AAClC,cAAM,KAAK,IAAI,cAAc,MAAM,KAAK,CAAC;AAAA,MAC7C;AAAA,IACJ;AAEA,WAAO,MAAM,KAAK,KAAK;AAAA,EAC3B;AAAA,EAES,sBAAsB;AAC3B,UAAM,OAAY,EAAE,GAAG,KAAK;AAE5B,eAAW,SAAU,KAAK,YAAkC,eAAe;AACvE,UAAI,OAAO,KAAK,KAAK,MAAM,UAAU;AACjC,aAAK,KAAK,IAAI,KAAK,UAAU,KAAK,KAAK,CAAC;AAAA,MAC5C;AAAA,IACJ;AAEA,WAAO;AAAA,EACX;AAGJ;AAzDa,WACO,iBAAiB;AADxB,WA8BF,gBAAgB;AAAA,EACnB;AACJ;AAxBA;AAAA,EAHC,KAAK;AAAA,IACF,UAAU;AAAA,EACd,CAAC;AAAA,GAPQ,WAQT;AAKA;AAAA,EAHC,KAAK;AAAA,IACF,UAAU;AAAA,EACd,CAAC;AAAA,GAZQ,WAaT;AAGA;AAAA,EADC,KAAK;AAAA,GAfG,WAgBT;AAGA;AAAA,EADC,KAAK;AAAA,GAlBG,WAmBT;AAGA;AAAA,EADC,KAAK;AAAA,GArBG,WAsBT;AAGA;AAAA,EADC,KAAK;AAAA,GAxBG,WAyBT;AAGA;AAAA,EADC,KAAK;AAAA,GA3BG,WA4BT;AA5BS,aAAN;AAAA,EAHN,KAAK;AAAA,IACF,QAAQ;AAAA,EACZ,CAAC;AAAA,GACY;",
  "names": []
}
